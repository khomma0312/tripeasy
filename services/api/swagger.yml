openapi: 3.1.0
info:
  title: tripeasy
  version: 1.0.0
  description: TripeasyのAPI仕様書
components:
  schemas: {}
  parameters: {}
paths:
  /register:
    post:
      summary: 新規ユーザー登録API
      tags:
        - register
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
              required:
                - name
                - email
                - password
      responses:
        "200":
          description: 新規ユーザー登録成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                required:
                  - user
        "409":
          description: 登録済みのメールアドレスにつき登録失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /verify-email:
    post:
      summary: メール検証API
      tags:
        - verify-email
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
              required:
                - token
      responses:
        "200":
          description: メール検証成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      email:
                        type: string
                        nullable: true
                    required:
                      - email
                required:
                  - user
        "400":
          description: 有効なトークンでないので検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: 対象のリソースが見つからないので検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /request-token:
    post:
      summary: トークンの再発行API
      tags:
        - request-token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
                - email
      responses:
        "200":
          description: トークンの発行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "400":
          description: メールアドレスがすでに認証済みのため失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: メールアドレスが未登録のため失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: トークンの生成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-items:
    post:
      summary: TODOアイテム新規作成API
      tags:
        - todo-items
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                todoListId:
                  type: number
                todoItem:
                  type: object
                  properties:
                    title:
                      type: string
                    dueDate:
                      type: string
                    isCompleted:
                      type: boolean
                    order:
                      type: number
                  required:
                    - title
                    - isCompleted
                    - order
              required:
                - todoListId
                - todoItem
      responses:
        "200":
          description: TODOアイテム作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム作成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-items/{id}:
    patch:
      summary: TODOアイテム更新API
      tags:
        - todo-items
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                dueDate:
                  type: string
              required:
                - title
      responses:
        "200":
          description: TODOアイテム更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    delete:
      summary: TODOアイテム削除API
      tags:
        - todo-items
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: TODOアイテム削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム削除に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-items/is-completed/{id}:
    patch:
      summary: TODOアイテムのisCompletedの更新API
      tags:
        - todo-items
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                isCompleted:
                  type: boolean
              required:
                - isCompleted
      responses:
        "200":
          description: TODOアイテム更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-lists:
    get:
      summary: ログイン中のユーザーに紐づく全てのTODOリストの取得(ページネーションもあり)
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: page
          in: query
        - schema:
            type: number
          required: false
          name: perPage
          in: query
      responses:
        "200":
          description: TODOリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  todoLists:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                        startDate:
                          type: string
                        totalTasks:
                          type: number
                        completedTasks:
                          type: number
                      required:
                        - id
                        - title
                        - totalTasks
                        - completedTasks
                  totalPages:
                    type: number
                required:
                  - todoLists
                  - totalPages
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-lists/{id}:
    get:
      summary: 単一のTODOリストの取得
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: TODOリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  title:
                    type: string
                  tripId:
                    type: number
                  tripTitle:
                    type: string
                  tripDate:
                    type: string
                  items:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                        dueDate:
                          type: string
                        isCompleted:
                          type: boolean
                        order:
                          type: number
                      required:
                        - id
                        - title
                        - isCompleted
                        - order
                required:
                  - id
                  - title
                  - tripId
                  - tripTitle
                  - items
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: TODOリストが存在しないので取得失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    patch:
      summary: TODOリスト更新API
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
              required:
                - title
      responses:
        "200":
          description: TODOリスト更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOリスト更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    delete:
      summary: TODOリスト削除API
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: TODOリスト削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOリスト削除に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /accommodations:
    get:
      summary: ログイン中のユーザーに紐づく全ての予約した宿泊施設の取得(ページネーションもあり)
      tags:
        - accommodations
      parameters:
        - schema:
            type: number
          required: true
          name: page
          in: query
        - schema:
            type: number
          required: false
          name: perPage
          in: query
      responses:
        "200":
          description: 予約した宿泊施設取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  accommodations:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        address:
                          type: string
                        checkIn:
                          type: string
                        checkOut:
                          type: string
                        image:
                          type: string
                        bookingUrl:
                          type: string
                        bookingId:
                          type: string
                      required:
                        - id
                        - name
                        - checkIn
                        - checkOut
                        - image
                  totalPages:
                    type: number
                required:
                  - accommodations
                  - totalPages
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
