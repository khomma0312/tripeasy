openapi: 3.1.0
info:
  title: tripeasy
  version: 1.0.0
  description: TripeasyのAPI仕様書
components:
  schemas: {}
  parameters: {}
paths:
  /register:
    post:
      summary: 新規ユーザー登録API
      tags:
        - register
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
              required:
                - name
                - email
                - password
      responses:
        "200":
          description: 新規ユーザー登録成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                        nullable: true
                    required:
                      - id
                      - name
                required:
                  - user
        "409":
          description: 登録済みのメールアドレスにつき登録失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /verify-email:
    post:
      summary: メール検証API
      tags:
        - verify-email
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
              required:
                - token
      responses:
        "200":
          description: メール検証成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      email:
                        type: string
                        nullable: true
                    required:
                      - email
                required:
                  - user
        "400":
          description: 有効なトークンでないので検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: 対象のリソースが見つからないので検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /request-token:
    post:
      summary: トークンの再発行API
      tags:
        - request-token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
                - email
      responses:
        "200":
          description: トークンの発行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "400":
          description: メールアドレスがすでに認証済みのため失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: メールアドレスが未登録のため失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: トークンの生成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-items:
    post:
      summary: TODOアイテム新規作成API
      tags:
        - todo-items
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                todoListId:
                  type: number
                todoItem:
                  type: object
                  properties:
                    title:
                      type: string
                    dueDate:
                      type: string
                    isCompleted:
                      type: boolean
                    order:
                      type: number
                  required:
                    - title
                    - isCompleted
                    - order
              required:
                - todoListId
                - todoItem
      responses:
        "200":
          description: TODOアイテム作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム作成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-items/{id}:
    patch:
      summary: TODOアイテム更新API
      tags:
        - todo-items
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                dueDate:
                  type: string
              required:
                - title
      responses:
        "200":
          description: TODOアイテム更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    delete:
      summary: TODOアイテム削除API
      tags:
        - todo-items
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: TODOアイテム削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム削除に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-items/is-completed/{id}:
    patch:
      summary: TODOアイテムのisCompletedの更新API
      tags:
        - todo-items
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                isCompleted:
                  type: boolean
              required:
                - isCompleted
      responses:
        "200":
          description: TODOアイテム更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOアイテム更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-lists:
    get:
      summary: ログイン中のユーザーに紐づく全てのTODOリストの取得(ページネーションもあり)
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: page
          in: query
        - schema:
            type: number
          required: false
          name: perPage
          in: query
      responses:
        "200":
          description: TODOリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  todoLists:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                        startDate:
                          type: string
                        totalTasks:
                          type: number
                        completedTasks:
                          type: number
                      required:
                        - id
                        - title
                        - totalTasks
                        - completedTasks
                  totalPages:
                    type: number
                required:
                  - todoLists
                  - totalPages
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /todo-lists/{id}:
    get:
      summary: 単一のTODOリストの取得
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: TODOリスト取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  title:
                    type: string
                  tripDate:
                    type: string
                  items:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                        dueDate:
                          type: string
                        isCompleted:
                          type: boolean
                        order:
                          type: number
                      required:
                        - id
                        - title
                        - isCompleted
                        - order
                required:
                  - id
                  - title
                  - items
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: TODOリストが存在しないので取得失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    patch:
      summary: TODOリスト更新API
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
              required:
                - title
      responses:
        "200":
          description: TODOリスト更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOリスト更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    delete:
      summary: TODOリスト削除API
      tags:
        - todo-lists
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: TODOリスト削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: TODOリスト削除に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /accommodations:
    post:
      summary: 宿泊施設新規作成API
      tags:
        - accommodations
        - orval-exclude
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                accommodation:
                  type: object
                  properties:
                    name:
                      type: string
                      minLength: 1
                    address:
                      type: string
                    checkIn:
                      type: string
                    checkOut:
                      type: string
                    reservationPrice:
                      type: string
                    notes:
                      type: string
                    image:
                      anyOf:
                        - {}
                        - type: string
                    phoneNumber:
                      type: string
                    bookingId:
                      type: string
                    bookingUrl:
                      type: string
                    informationUrl:
                      type: string
                    tripId:
                      type: string
                  required:
                    - name
                    - checkIn
                    - checkOut
                    - image
              required:
                - accommodation
      responses:
        "200":
          description: 宿泊施設作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: 宿泊施設作成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    get:
      summary: ログイン中のユーザーに紐づく全ての予約した宿泊施設の取得(ページネーションもあり)
      tags:
        - accommodations
      parameters:
        - schema:
            type: number
          required: true
          name: page
          in: query
        - schema:
            type: number
          required: false
          name: perPage
          in: query
      responses:
        "200":
          description: 予約した宿泊施設取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  accommodations:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        image:
                          type: string
                        address:
                          type: string
                        checkIn:
                          type: string
                        checkOut:
                          type: string
                        bookingUrl:
                          type: string
                        bookingId:
                          type: string
                      required:
                        - id
                        - name
                        - checkIn
                        - checkOut
                  totalPages:
                    type: number
                required:
                  - accommodations
                  - totalPages
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /accommodations/{id}:
    get:
      summary: 単一の宿泊施設の取得
      tags:
        - accommodations
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: 予約した宿泊施設取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  accommodation:
                    type: object
                    properties:
                      id:
                        type: number
                      tripId:
                        type: number
                      name:
                        type: string
                      image:
                        type: string
                      address:
                        type: string
                      checkIn:
                        type: string
                      checkOut:
                        type: string
                      reservationPrice:
                        type: number
                      notes:
                        type: string
                      bookingUrl:
                        type: string
                      informationUrl:
                        type: string
                      phoneNumber:
                        type: string
                      bookingId:
                        type: string
                    required:
                      - id
                      - name
                      - checkIn
                      - checkOut
                required:
                  - accommodation
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: 宿泊施設が存在しないので取得失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    patch:
      summary: 宿泊施設更新API
      tags:
        - accommodations
        - orval-exclude
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                accommodation:
                  type: object
                  properties:
                    name:
                      type: string
                      minLength: 1
                    address:
                      type: string
                    checkIn:
                      type: string
                    checkOut:
                      type: string
                    reservationPrice:
                      type: string
                    notes:
                      type: string
                    image:
                      anyOf:
                        - {}
                        - type: string
                    phoneNumber:
                      type: string
                    bookingId:
                      type: string
                    bookingUrl:
                      type: string
                    informationUrl:
                      type: string
                    tripId:
                      type: string
                  required:
                    - name
                    - checkIn
                    - checkOut
                    - image
              required:
                - accommodation
      responses:
        "200":
          description: 宿泊施設更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: 宿泊施設更新に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    delete:
      summary: 宿泊施設削除API
      tags:
        - accommodations
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: 宿泊施設削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: 宿泊施設削除に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /accommodations/search:
    get:
      summary: 外部APIから検索した宿泊施設の取得
      tags:
        - accommodations
      parameters:
        - schema:
            type: number
          required: true
          name: lat
          in: query
        - schema:
            type: number
          required: true
          name: lng
          in: query
        - schema:
            type: number
          required: true
          name: page
          in: query
      responses:
        "200":
          description: 宿泊施設取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  accommodations:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        address:
                          type: string
                        reviewAverage:
                          type: number
                        informationUrl:
                          type: string
                        phoneNumber:
                          type: string
                        hotelImageUrl:
                          type: string
                        reviewCount:
                          type: number
                      required:
                        - id
                        - name
                        - address
                        - reviewAverage
                        - informationUrl
                        - phoneNumber
                        - hotelImageUrl
                        - reviewCount
                  pageCount:
                    type: number
                  currentPage:
                    type: number
                required:
                  - accommodations
                  - pageCount
                  - currentPage
        "400":
          description: 不正なリクエストのため失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /trips:
    get:
      summary: ログイン中のユーザーに紐づく全ての旅行情報の取得
      tags:
        - trips
      parameters:
        - schema:
            type: number
          required: true
          name: page
          in: query
        - schema:
            type: number
          required: false
          name: perPage
          in: query
      responses:
        "200":
          description: 旅行情報取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  trips:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                        image:
                          type: string
                        destination:
                          type: string
                        startDate:
                          type: string
                        endDate:
                          type: string
                      required:
                        - id
                        - title
                        - startDate
                        - endDate
                  totalPages:
                    type: number
                required:
                  - trips
                  - totalPages
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    post:
      summary: 旅程情報新規作成API
      tags:
        - trips
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                trip:
                  type: object
                  properties:
                    title:
                      type: string
                    destination:
                      type: string
                    startDate:
                      type: string
                    endDate:
                      type: string
                  required:
                    - title
                    - startDate
                    - endDate
              required:
                - trip
      responses:
        "200":
          description: 旅程情報作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: 旅程情報作成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /trips/{id}:
    get:
      summary: 単一の旅行情報の取得
      tags:
        - trips
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: 旅行情報取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  trip:
                    type: object
                    properties:
                      id:
                        type: number
                      title:
                        type: string
                      image:
                        type: string
                      destination:
                        type: string
                      startDate:
                        type: string
                      endDate:
                        type: string
                      tripDays:
                        type: array
                        items:
                          type: object
                          properties:
                            dayOrder:
                              type: number
                            dayDate:
                              type: string
                            dayDescription:
                              type: string
                            tripDayId:
                              type: number
                            tripRoutePoints:
                              type: array
                              items:
                                type: object
                                properties:
                                  name:
                                    type: string
                                  address:
                                    type: string
                                  latLng:
                                    type: object
                                    properties:
                                      x:
                                        type: number
                                      y:
                                        type: number
                                    required:
                                      - x
                                      - y
                                  visitOrder:
                                    type: number
                                  arrivalTime:
                                    type: string
                                  departureTime:
                                    type: string
                                  imageUrl:
                                    type: string
                                  accommodationId:
                                    type: number
                                required:
                                  - name
                                  - visitOrder
                                  - arrivalTime
                                  - departureTime
                          required:
                            - dayOrder
                            - dayDate
                            - tripDayId
                      todoIds:
                        type: array
                        items:
                          type: number
                      accommodationIds:
                        type: array
                        items:
                          type: number
                    required:
                      - id
                      - title
                      - startDate
                      - endDate
                      - tripDays
                required:
                  - trip
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "404":
          description: 旅行情報が存在しないので取得失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
    delete:
      summary: 旅程情報削除API
      tags:
        - trips
      parameters:
        - schema:
            type: number
          required: true
          name: id
          in: path
      responses:
        "200":
          description: 旅程情報削除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: 旅程情報削除に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /trip-route-points:
    post:
      summary: 目的地新規作成API
      tags:
        - trip-route-points
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                tripRoutePoint:
                  type: object
                  properties:
                    destination:
                      type: object
                      properties:
                        name:
                          type: string
                        address:
                          type: string
                        latLng:
                          type: object
                          properties:
                            lat:
                              type: number
                            lng:
                              type: number
                          required:
                            - lat
                            - lng
                        imageUrl:
                          type: string
                        arrivalTime:
                          type: string
                        departureTime:
                          type: string
                        tripDayId:
                          type: number
                      required:
                        - name
                        - address
                        - arrivalTime
                        - departureTime
                        - tripDayId
                    accommodation:
                      type: object
                      properties:
                        name:
                          type: string
                        address:
                          type: string
                        latLng:
                          type: object
                          properties:
                            lat:
                              type: number
                            lng:
                              type: number
                          required:
                            - lat
                            - lng
                        imageUrl:
                          type: string
                        accommodationId:
                          type: number
                        arrivalTime:
                          type: string
                        departureTime:
                          type: string
                        tripDayId:
                          type: number
                      required:
                        - arrivalTime
                        - departureTime
                        - tripDayId
              required:
                - tripRoutePoint
      responses:
        "200":
          description: 目的地作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                required:
                  - id
        "403":
          description: ユーザー検証に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
        "500":
          description: 目的地作成に失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
  /destinations/search:
    get:
      summary: 外部APIを使用して目的地の検索結果の取得
      tags:
        - destinations
        - orval-exclude
      parameters:
        - schema:
            type: string
          required: true
          name: searchTerm
          in: query
        - schema:
            type: string
          required: true
          name: searchByPlaceId
          in: query
        - schema:
            type: string
          required: false
          name: searchLocationLat
          in: query
        - schema:
            type: string
          required: false
          name: searchLocationLng
          in: query
        - schema:
            type: string
            enum:
              - accommodation
              - destination
          required: false
          name: searchType
          in: query
        - schema:
            type: string
          required: false
          name: nextPageToken
          in: query
      responses:
        "200":
          description: 目的地検索結果取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  destinations:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        address:
                          type: string
                        imageUrl:
                          type: string
                        placeId:
                          type: string
                        latLng:
                          type: object
                          properties:
                            lat:
                              type: number
                            lng:
                              type: number
                          required:
                            - lat
                            - lng
                      required:
                        - name
                        - address
                  nextPageToken:
                    type: string
                required:
                  - destinations
        "400":
          description: 不正なリクエストのため失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
